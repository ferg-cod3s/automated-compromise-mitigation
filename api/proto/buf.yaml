# Copyright 2025 ACM Project
# SPDX-License-Identifier: Apache-2.0

# Buf configuration for ACM Protocol Buffers
# This file configures buf build, lint, and breaking change detection.
# For more information: https://buf.build/docs/configuration/v1/buf-yaml

version: v1

# Build configuration
build:
  # Exclude paths from compilation (e.g., third-party protos)
  excludes: []

# Linting rules to enforce best practices
lint:
  use:
    # Use the default linting rules (includes most best practices)
    - DEFAULT
    # Additional rules for API design
    - PACKAGE_VERSION_SUFFIX
    - RPC_REQUEST_RESPONSE_UNIQUE
    - RPC_REQUEST_STANDARD_NAME
    - RPC_RESPONSE_STANDARD_NAME
    - FIELD_LOWER_SNAKE_CASE
    - ENUM_VALUE_UPPER_SNAKE_CASE
    - ENUM_ZERO_VALUE_SUFFIX
    - SERVICE_SUFFIX

  # Exceptions to linting rules (if needed)
  ignore: []

  # Enforce specific rules as errors
  enum_zero_value_suffix: _UNSPECIFIED
  rpc_allow_same_request_response: false
  rpc_allow_google_protobuf_empty_requests: false
  rpc_allow_google_protobuf_empty_responses: false

# Breaking change detection configuration
breaking:
  use:
    # Detect breaking changes for wire compatibility
    - WIRE
    # Detect breaking changes for wire + JSON compatibility
    - WIRE_JSON

  # Ignore certain breaking changes if needed (use sparingly)
  ignore: []

# Module name and dependencies (for buf registry)
# Uncomment if publishing to buf.build
# name: buf.build/acm-project/acm
# deps: []
