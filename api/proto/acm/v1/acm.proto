// ACM API v1 - Main Package File
//
// This file serves as the main entry point for the ACM gRPC API.
// Individual service definitions are in separate files:
//   - credential.proto: CredentialService for credential management
//   - audit.proto: AuditService for audit logging and compliance
//   - him.proto: HIMService for Human-in-the-Middle workflows
//   - common.proto: Shared types and enums
//
// The API follows these principles:
//   - Zero-knowledge: No passwords or keys in API requests/responses
//   - Secure by default: All communication over mTLS
//   - Streaming support: Real-time HIM prompts and responses

syntax = "proto3";

package acm.v1;

option go_package = "github.com/ferg-cod3s/automated-compromise-mitigation/api/proto/acm/v1;acmv1";

// HealthService provides service health and status information.
// This is defined here as it's a cross-cutting concern not specific to any one service.
service HealthService {
  // Check returns the health status of the service and its components.
  rpc Check(HealthRequest) returns (HealthResponse);
}

// HealthRequest is the request for health check.
message HealthRequest {
  // Empty for now, but allows for future extensions
}

// HealthResponse contains the health status of the service.
message HealthResponse {
  // Status indicates overall service health
  enum HealthStatus {
    HEALTH_STATUS_UNSPECIFIED = 0;
    HEALTH_STATUS_HEALTHY = 1;
    HEALTH_STATUS_DEGRADED = 2;
    HEALTH_STATUS_UNHEALTHY = 3;
  }

  HealthStatus status = 1;

  // Components maps component names to their health status
  map<string, bool> components = 2;

  // Message provides additional context about the health status
  string message = 3;

  // Timestamp when the health check was performed
  int64 timestamp = 4;
}
